<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AR Hiro + Kanji Marker Popup</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  <style>
    body { margin:0; overflow:hidden; font-family:sans-serif; }

    /* 公用的浮動視窗樣式 */
    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 800px;
      background: #000;
      border-radius: 8px;
      display: none; /* 初始隱藏 */
      z-index: 100;
      padding: 0;
    }

    /* 關閉按鈕 */
    .closeBtn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: red;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 6px 12px;
      cursor: pointer;
      z-index: 101;
    }

    /* YouTube iframe */
    iframe {
      width: 100%;
      height: 400px;
      border: none;
      border-radius: 0 0 8px 8px;
    }

    /* 圖片 */
    img {
      width: 100%;
      height: auto;
      border-radius: 0 0 8px 8px;
      display: block;
    }
  </style>
</head>
<body>

  <!-- YouTube 影片視窗 -->
  <div id="videoPopup" class="popup">
    <button class="closeBtn" onclick="closePopup('videoPopup')">關閉</button>
    <iframe id="ytPlayer" 
            src="https://www.youtube.com/embed/cci1yhDeOjs" 
            allow="autoplay; encrypted-media" allowfullscreen>
    </iframe>
  </div>

  <!-- 圖片視窗 -->
  <div id="imagePopup" class="popup">
    <button class="closeBtn" onclick="closePopup('imagePopup')">關閉</button>
    <img src="assets/test.jpg" alt="Test Image">
  </div>

  <!-- A-Frame AR.js 場景 -->
  <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
    <!-- 內建 HIRO marker → 觸發影片 -->
    <a-marker preset="hiro" id="hiroMarker"></a-marker>

    <!-- 內建 Kanji marker → 觸發圖片 -->
    <a-marker preset="kanji" id="kanjiMarker"></a-marker>

    <a-entity camera></a-entity>
  </a-scene>

  <script>
    const videoPopup = document.getElementById('videoPopup');
    const imagePopup = document.getElementById('imagePopup');
    const hiroMarker = document.getElementById('hiroMarker');
    const kanjiMarker = document.getElementById('kanjiMarker');

    // 照到 HIRO marker → 顯示影片
    hiroMarker.addEventListener('markerFound', () => {
      videoPopup.style.display = 'block';
    });

    // 照到 Kanji marker → 顯示圖片
    kanjiMarker.addEventListener('markerFound', () => {
      imagePopup.style.display = 'block';
    });

    // 關閉視窗（影片或圖片）
    function closePopup(id) {
      document.getElementById(id).style.display = 'none';
    }
  </script>

</body>
</html>
